<div class="container">
	<h1></h1>

	<div class= "row row-offcanvas row-offcanvas-right">

		<div class="col-xs-12 col-sm-9">
			<p class="pull-right visible-xs"></p>

			<div class="jumbotron">
				<h1>BEERS!</h1>
				<p>The beer of the day is - {{ beers }} </p>
			</div>

				<div class="row">

	<!-- 			BEER ROW!
	 -->			
	 				<ul>
	 					{{#each dbBeer}}
							<div class="col-xs-6 col-lg-4">
								<h2>{{this.name}}</h2>
								<p>
									<a class="btn btn-default" href="#" role="button"> View Details>
									</a>
								</p>
							</div>
						{{/each}}
					</ul>


				</div>
			</div>

			<div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar">
			
				<div class="list-group">

					<a href="#" class="list-group-item warning">Link</a>

					<form action="/listAll" method="POST">
                        <input type="hidden" name="id" value="listAll">
                        <button type="submit">List All Beers</button>
                    </form>

					<p><a href="#" data-behaviour="modal" data-title="1 What's Your Favorite Beer?" data-content="1 content goes here">
						Find Me A New Beer</a>
					</p>


					<form action="/findNew" method="POST">
                        <input type="hidden" name="id" value="findNew">
                        <button type="submit">Find Me A New Beer</button>
                    </form>

					<form action="/AddNew" method="POST">
                        <input type="hidden" name="id" value="AddNew">
                        <button type="submit">Add a New Beer</button>
                    </form>
                    
						<a href="#" class="list-group-item">Link</a>
						<a href="#" class="list-group-item">Link</a>
						<a href="#" class="list-group-item">Link</a>
						<a href="#" class="list-group-item">Link</a>
				</div>
			</div>

			<div class="row">

				<div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar">
				
					    <div class="list-group">

							<a href="#" class="list-group-item warning">Link</a>
								<a href="#" class="list-group-item">Link</a>
								<a href="#" class="list-group-item">Link</a>
								<a href="#" class="list-group-item">Link</a>
								<a href="#" class="list-group-item">Link</a>
								<a href="#" class="list-group-item">Link</a>
					    </div>
				</div>
		</div>

	</div>


</div>

<script id="modal-template" type="text/x-handlebars-template">
<div id="modal" class="modal">
	<div class="modal-body">
		<h2>{{ title }}</h2>
		<p>{{ content }}</p>
	</div>
</div>
</script>

<script>
function() {
  
	// Simple modal 
	var modal = {
		init: function() {

			// Setup the template
			this.source = $("#modal-template").html();
			
			// Setup outercontainer
			this.outercontainer = $('body');

			// Get the stuff
			this.clickToOpenModal();

			// Close the stuff
			this.closeModal();
		},

		clickToOpenModal: function(context, thisLink) {

			$('a[data-behaviour="modal"]').on('click', function(e) {
				var thisLink = $(this);

				var context = {
					title: thisLink.data('title'), 
					content: thisLink.data('content')
				};

				e.preventDefault();
				
		     // Do nothing if open
		     if ( modal.outercontainer.children('div#modal').length ) return;

		     // Attach the content to the the modal
				modal.attachTemplate(context, thisLink);

				// Trigger the open event
				thisLink.trigger('open');
			});
		},

		attachTemplate: function(context, thisLink) {
			var source = Handlebars.compile(this.source);

	        this.outercontainer
	          .append(source(context))
	          .promise()
	          .done(function() {

		          this
		            .children('div#modal')
		            .addClass('modal-visible');

		           // Close the stuff
		           thisLink.one('open', function() {
		             modal.closeModal();
		           });

				});
		},

		closeModal: function() {
			var container = $("div#modal");

			// Remove modal on click background
			container.on('click', function() {
				container.remove();

			});
			// Remove modal on keypress ESC
			$(document).on( 'keydown', function (e) {
			    if ( e.keyCode === 27 ) {
			       container.remove();
			    }
			});
			// You can click on modal body
			container.find('div.modal-body').on('click', function(e) {
				e.stopPropagation();
			});
		}
	};

	modal.init();

};

</script>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.js"></script>
